# Repository Guidelines

## โครงสร้างโปรเจกต์และการจัดโมดูล
- โครงสร้างแนะนำ:
  - `src/` — โค้ดแอป/ไลบรารี แยกตามโมดูลฟีเจอร์
  - `tests/` — ยูนิต/อินทิเกรชันเทสต์ สะท้อนโครงสร้าง `src/`
  - `scripts/` — สคริปต์สำหรับนักพัฒนา (setup, release, data)
  - `assets/` — ไฟล์สแตติก (ภาพ, สไตล์, fixtures)
  - `docs/` — เอกสารประกอบ
- โมดูลควรเล็ก ชัดเจน แยก domain/infrastructure/UI ให้เป็นสัดส่วน

## คำสั่ง Build, Test และ Development
- `make install` — ติดตั้ง dependencies
- `make build` — สร้าง/คอมไพล์ artifact
- `make test` — รันเทสต์พร้อม coverage
- `make lint` — รัน linter และตรวจ type
- `make format` — จัดรูปแบบโค้ดอัตโนมัติ
- `make run` — รันแอปแบบโลคอล
หากไม่มี Makefile ให้ใช้คำสั่งของสแตกโดยตรง เช่น `npm ci && npm test` หรือ `pytest -q`.

## สไตล์โค้ดและการตั้งชื่อ
- ย่อหน้า: 2 ช่องสำหรับ JS/TS/JSON/YAML; 4 ช่องสำหรับ Python
- การตั้งชื่อ: `snake_case` สำหรับไฟล์ Python; `kebab-case` สำหรับโฟลเดอร์/ชื่อ CLI; `PascalCase` สำหรับคลาส; `camelCase` สำหรับฟังก์ชัน/ตัวแปรใน JS/TS
- Import: จัดกลุ่ม stdlib → third‑party → local; หลีกเลี่ยงการอ้างอิงวนซ้ำ
- เครื่องมือ lint/format:
  - JS/TS: ESLint + Prettier
  - Python: Ruff + Black

## แนวทางการทดสอบ
- วางเทสต์ใน `tests/` โดยสะท้อนโครงสร้าง `src/`
- การตั้งชื่อ: Python `test_*.py`; JS/TS `*.spec.(ts|js)`
- ตั้งเป้า coverage ≥80% สำหรับโค้ดที่มีการแก้ไข (`make test`)
- เมื่อแก้บั๊ก ให้เพิ่มเทสต์ที่ล้มเหลวก่อน แล้วจึงแก้โค้ด

## แนวทาง Commit และ Pull Request
- ใช้ Conventional Commits: `feat:`, `fix:`, `docs:`, `chore:`, `refactor:`, `test:`, `build:`
- คอมมิตควรเล็กและโฟกัสเดียว ใส่บริบทในบอดี้เมื่อจำเป็น
- ข้อกำหนด PR:
  - คำอธิบายชัดเจน พร้อมเหตุผล และลิงก์อีชชู (`Closes #123`)
  - มีเทสต์รองรับการเปลี่ยนแปลง และอัปเดตเอกสารหากมีผลกับผู้ใช้
  - แนบสกรีนช็อต/ล็อกสำหรับการเปลี่ยน UI/CLI
  - CI ผ่านทั้งหมด (build, lint, test)

## ความปลอดภัยและการตั้งค่า
- ห้ามคอมมิตความลับ ใช้ไฟล์เช่น `.env.local` และบันทึกตัวแปรที่ต้องใช้ไว้ใน `docs/`
- ตรวจสอบอินพุตที่ขอบเขต ใช้ parameterized queries และการซีเรียลไลซ์ที่ปลอดภัย

## หมายเหตุสำหรับเอเจนต์
- ปฏิบัติตามกฎนี้กับทุกการเปลี่ยนแปลง ให้ความสำคัญกับ diff ที่น้อย ชื่อคอมมิตชัดเจน และอัปเดตเทสต์คู่กับโค้ดเสมอ
